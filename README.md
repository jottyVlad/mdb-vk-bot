# Бот для ВКонтакте MDB
![](https://imgur.com/WWv3qEu.jpeg)

## Описание механик бота.
- Система предупреждений и блокировок:
    - Администратор беседы может выдавать предупреждения участникам и, если их количество достигло максимума, выгонять данного участника из беседы.
- Игровая механика:
    - "Работы" - пользователь может зарабатывать игровую валюту на "работе". Чем больше зарплата на работе, тем больше опыта нужно для того, чтобы эту работу получить;
    - "Опыт" - для того, чтобы иметь машину или работу, пользователь должен зарабатывать опыт. Он зарабатывается с помощью общения и своей машины. Чем дороже машина, тем больше опыта за написанный символ можно получить;
    - "Машины" - делают множитель на опыт. Чем дороже машина, тем больше опыта и игровой валюты она стоит.

## Примеры работы бота.
![](https://i.imgur.com/AUdO8li.png)
![](https://imgur.com/zeFDQu8.png)
![](https://imgur.com/Hc7UzHl.png)

## Инструкция по запуску бота.
Так как бот написан для запуска на сервере, то для запуска на компьютере придётся повеселиться =)
1. Скачиваем ngrok.
2. Кидаем его в папку с ботом.
3. Создаём в папке с ботом виртуальное окружение (python -m virtualenv venv) и входим в него (на Linux: ./venv/bin/activate, на Win: cd ./venv/Scripts && .\activate.bat)
4. Создаём в папке с ботом файл .env, в котором заполняем:
    4.1. SECRET=секретный_ключ_callbackAPI_в_настройках_группы.
    4.2. ACCESS_TOKEN=access_token_в_настройках_api_группы.
    4.3. USER_ACCESS_TOKEN=user_access_token, получаем его тут: https://vkhost.github.io/, выбираем VK ME.
    4.4. CONFIRMATION_TOKEN=то_что_должен_вернуть_сайт_при_подтверждении_адреса.
    4.5. ADMINS_IN_CONV=444944367,10885998,26211044,500101793 просто оставьте так =)
    4.6. WEBHOOK_ACCEPT=1
    4.7. NEW_START=1
5. Подгружаем требуемые пакеты
6. Запускаем ngrok на порт, указанный в bot.py, адрес в bot.py должен быть 127.0.0.1 (в самом низу файла).
7. Копируем адрес, который нам выделил ngrok (протокол http).
8. Вставляем адрес в настройках callback Api группы.
9. Запускаем бота (python bot.py)
10. Подтверждаем адрес.
11. В .env меняем WEBHOOK_ACCEPT на 0 и перезагружаем бота.
12. Запускаем бота. Пишем ему в личку три сообщения: /бд добавить GlobalRole name: Default /бд добавить GlobalRole name: Moderator /бд добавить GlobalRole name: Administrator
13. Нам бот должен будет все три раза ответить None. После этого меняем в .env NEW_START на 0 и снова перезагружаем бота.
14. Нормально пользуемся ботом. Ураааа! Вы прошли все круги ада =)
